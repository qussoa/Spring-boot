<!DOCTYPE html>
<html>
<head th:fragment="listHead">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Insert title here</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
<style>
table {
	border: 1px solid #CBA6C3;
	border-collapse: collapse;
	width: 90%;
	margin: 10px auto;
}

td, th {
	white-space: nowrap;
	border: 1px solid #CBA6C3;
}

.text-color {
	color: #353866;
	align-items: center;
	text-align: center;
}

.bg-color {
	background-color: #CBA6C3;
	color: #F8FAFF;
	text-align: center;
}

.btn-color {
	border: 1px solid #CBA6C3;
	background-color: rgba(0, 0, 0, 0);
	color: #CBA6C3;
}

.btn-color:hover {
	color: #F8FAFF;
	background-color: #CBA6C3;
}
</style>

<script>
	$(function() {
		$(document).on("click", "#btn-insert", function() {
			document.location.href = "/book/insert"
		})

		$(document).on("click", ".b_tr", function() {
			let id = $(this).data("book-id")
			document.location.href = "/book/update?id=" + id
		})
	})
</script>
</head>
<body th:fragment="listBody">
	<h2 class="text-color">BOOK LIST</h2>
	<table>
		<tr class="bg-color">

			<th>TITLE</th>
			<th>PUBLISHER</th>
			<th>AUTHOR</th>
			<th>PUBLICATION YEAR</th>
			<th>PRICE</th>
			<th>ATC.</th>
		</tr>
		<tr th:each="book : ${bookList}" class="text-color"
			th:data-book-id="${book.id}">

			<td th:text="${book.title}" class="b_tr"
				th:attr="data-book-id=${book.id}"></td>
			<td th:text="${book.comp}"></td>
			<td th:text="${book.auth}"></td>
			<td th:text="${book.year}"></td>
			<td th:text="${book.price}"></td>
			<td th:data-book-id="${book.id}"><a
				th:href="@{/book/delete(id=${book.id})}">삭제</a></td>
		</tr>
	</table>
	<div>
		<button id="btn-insert" class="btn-color">MEMEBER 등록</button>
	</div>
	
	<th:block th:include="page"/>
</body>
</html>